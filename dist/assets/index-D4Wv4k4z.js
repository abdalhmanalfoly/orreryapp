import*as t from"https://unpkg.com/three@0.127.0/build/three.module.js";import{OrbitControls as j}from"https://unpkg.com/three@0.127.0/examples/jsm/controls/OrbitControls.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function d(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(e){if(e.ep)return;e.ep=!0;const n=d(e);fetch(e.href,n)}})();const f=new t.WebGLRenderer;f.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(f.domElement);const o=new t.TextureLoader,l=o.load("./image/stars.jpg"),R=o.load("./image/sun.jpg"),P=o.load("./image/mercury.jpg"),S=o.load("./image/venus.jpg"),v=o.load("./image/earth.jpg"),O=o.load("./image/mars.jpg"),G=o.load("./image/jupiter.jpg"),E=o.load("./image/saturn.jpg"),C=o.load("./image/uranus.jpg"),W=o.load("./image/neptune.jpg"),A=o.load("./image/pluto.jpg"),B=o.load("./image/saturn_ring.png"),H=o.load("./image/uranus_ring.png"),p=new t.Scene,I=new t.CubeTextureLoader,z=I.load([l,l,l,l,l,l]);p.background=z;const w=new t.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);w.position.set(-50,90,150);new j(w,f.domElement);const N=new t.SphereGeometry(15,50,50),U=new t.MeshBasicMaterial({map:R}),M=new t.Mesh(N,U);p.add(M);const Y=new t.PointLight(16777215,4,300);p.add(Y);const y=new t.AmbientLight(16777215,0);p.add(y);const b=[];function D(a,r,d){const s=new t.LineBasicMaterial({color:r,linewidth:d}),e=new t.BufferGeometry,n=[],i=100;for(let m=0;m<=i;m++){const _=m/i*Math.PI*2,h=a*Math.cos(_),T=a*Math.sin(_);n.push(h,0,T)}e.setAttribute("position",new t.Float32BufferAttribute(n,3));const c=new t.LineLoop(e,s);p.add(c),b.push(c)}const u=(a,r,d,s)=>{const e=new t.SphereGeometry(a,50,50),n=new t.MeshStandardMaterial({map:r}),i=new t.Mesh(e,n),c=new t.Object3D;if(i.position.set(d,0,0),s){const m=new t.RingGeometry(s.innerRadius,s.outerRadius,32),_=new t.MeshBasicMaterial({map:s.ringmat,side:t.DoubleSide}),h=new t.Mesh(m,_);c.add(h),h.position.set(d,0,0),h.rotation.x=-.5*Math.PI}return p.add(c),c.add(i),D(d,16777215,3),{planetObj:c,planet:i}},F=[{...u(3.2,P,28),rotaing_speed_around_sun:.004,self_rotation_speed:.004},{...u(5.8,S,44),rotaing_speed_around_sun:.015,self_rotation_speed:.002},{...u(6,v,62),rotaing_speed_around_sun:.01,self_rotation_speed:.02},{...u(4,O,78),rotaing_speed_around_sun:.008,self_rotation_speed:.018},{...u(12,G,100),rotaing_speed_around_sun:.002,self_rotation_speed:.04},{...u(10,E,138,{innerRadius:10,outerRadius:20,ringmat:B}),rotaing_speed_around_sun:9e-4,self_rotation_speed:.038},{...u(7,C,176,{innerRadius:7,outerRadius:12,ringmat:H}),rotaing_speed_around_sun:4e-4,self_rotation_speed:.03},{...u(7,W,200),rotaing_speed_around_sun:1e-4,self_rotation_speed:.032},{...u(2.8,A,216),rotaing_speed_around_sun:7e-4,self_rotation_speed:.008}];var q=dat.gui.GUI;const L=new q,g={"Real view":!0,"Show path":!0,speed:1};L.add(g,"Real view").onChange(a=>{y.intensity=a?0:.5});L.add(g,"Show path").onChange(a=>{b.forEach(r=>{r.visible=a})});const x=new URL(window.location.href).searchParams.get("ms")*1;L.add(g,"speed",0,x||20);function K(a){M.rotateY(g.speed*.004),F.forEach(({planetObj:r,planet:d,rotaing_speed_around_sun:s,self_rotation_speed:e})=>{r.rotateY(g.speed*s),d.rotateY(g.speed*e)}),f.render(p,w)}f.setAnimationLoop(K);window.addEventListener("resize",()=>{w.aspect=window.innerWidth/window.innerHeight,w.updateProjectionMatrix(),f.setSize(window.innerWidth,window.innerHeight)});
